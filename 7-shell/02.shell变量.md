## shell-2-变量

### 变量类型

根据数据存储格式、存储空间大小、参与运算种类

- 字符型
- 数值型 (整型/浮点型)
- 强类型
  *定义变量时必须指定类型、参与运算必须符合类型要求；调用未声明变量会产生错误;*
- 弱类型
  *无须指定类型，默认均为字符型；参与运算会自动进行隐式类型转换；变量无须事先定义可直接调用*

### bash中的变量的种类

根据变量的生效范围等标准

- 本地变量：生效范围为当前shell进程；对当前shell之外的其它shell进程，包括当前shell的子shell进程均无效；
- 环境变量：生效范围为当前shell进程及其子进程；
- 局部变量：生效范围为当前shell进程中某代码片断(通常指函数)；
- 位置变量：$1, $2,...来表示，用于让脚本在脚本代码中调用通过命令行传递给它的参数；
- 特殊变量：$? , $0 , $* , $@ , $#

### 本地变量

变量赋值：**name='value'**

- (1) 可以是直接字串; name="username"
- (2) 变量引用：name="$username"
- (3) 命令引用： name=\`COMMAND\` , name=$(COMMAND)

变量引用：${name} , $name

- **" "**：双引号弱引用，其中的变量引用会被替换为变量值；
- **' '**  ：单引号强引用，其中的变量引用不会被替换为变量值。

显示已定义的所有变量 set

销毁变量 unset name

### 环境变量

- 变量声明、赋值：export name=VALUE;  declare -x name=VALUE
- 变量引用 : $name, ${name}
- 显示所有环境变量 : export , env , printenv
- 销毁 :	unset name

bash有许多内建的环境变量：PATH, SHELL, UID, HISTSIZE, HOME, PWD, OLD

### 只读变量

- readonly name
- declare -r name

### 特殊变量

- **$1, $2**, ...：位置变量，在脚本代码中调用通过命令行传递给脚本的参数；对应调用第1、第2等参数；(shift [n])
- **$0** 是脚本本身的名字；
- **$**: 传递给脚本的所有参数；
- **$@**: 传递给脚本的所有参数的列表；
- **$#**: 传递给脚本的参数的个数；
- **$$** 是脚本运行的当前进程ID号
- **$?** 是显示最后命令的退出状态，0表示没有错误，其他表示有错误

**变量命名法则**

- 不能使程序中的保留字：例如if, for;
- 只能使用数字、字母及下划线，且不能以数字开头；
- 见名知义;

---

示例：判断给出的文件的行数
```
#!/bin/bash
#
linecount="$(wc -l $1| cut -d' ' -f1)"
echo "$1 has $linecount lines."
```
